# WebASRCore 文檔結構（重構後）

## 主要改進
1. ✅ 消除了所有重複章節（第7節、第10節）
2. ✅ 合併了相似內容（執行模式、配置系統）
3. ✅ 按邏輯分組而非原始章節號
4. ✅ 技術細節歸類到相應主題下

## 最終章節結構

### 第一部分：入門指南
#### 1. 專案概覽
- 1.1 專案介紹與定位
- 1.2 核心設計理念（KISS、無狀態服務）
- 1.3 ASR Provider 隱私分級
- 1.4 與 ASRHub 的差異
- 1.5 快速開始指南

### 第二部分：架構設計
#### 2. 系統架構
- 2.1 架構總覽
- 2.2 技術棧選型
- 2.3 模組結構
- 2.4 分層架構
- 2.5 執行流程圖

#### 3. 狀態機設計
- 3.1 FSM 狀態定義（6-7個狀態）
- 3.2 狀態轉換規則
- 3.3 XState 整合
- 3.4 事件驅動架構

### 第三部分：核心組件
#### 4. 核心組件實作
- 4.1 AudioQueue（音訊佇列）
- 4.2 BufferManager（緩衝管理）
- 4.3 SolidJS Store（狀態管理）
- 4.4 事件系統

### 第四部分：服務與Provider
#### 5. 服務層架構
- 5.1 執行模式管理器（合併重複內容）
- 5.2 音訊處理服務
- 5.3 VAD 服務（Silero VAD）
- 5.4 Wake Word 服務（OpenWakeWord）
- 5.5 降噪服務
- 5.6 計時器服務

#### 6. ASR Provider 系統
- 6.1 Provider 介面定義
- 6.2 Web Speech Provider（串流模式）
- 6.3 Whisper Provider（批次模式）
- 6.4 串流 vs 批次的根本差異

#### 7. 模型管理系統（合併兩個第7節）
- 7.1 模型打包策略
- 7.2 模型載入方式
- 7.3 CDN 與本地載入
- 7.4 IndexedDB 快取
- 7.5 模型預載入優化

### 第五部分：Worker 與效能
#### 8. Worker 架構
- 8.1 Worker 整合設計
- 8.2 VAD Worker
- 8.3 Whisper Worker
- 8.4 AudioWorklet 處理器
- 8.5 Worker 通訊優化

#### 9. 效能優化
- 9.1 效能基準（RTF 指標）
- 9.2 記憶體管理
- 9.3 懶載入策略
- 9.4 快取優化

### 第六部分：配置與部署
#### 10. 配置管理（整合配置相關內容）
- 10.1 配置系統架構
- 10.2 預設配置
- 10.3 執行時配置
- 10.4 模型配置
- 10.5 環境適配

#### 11. 部署指南（合併兩個第10節部署內容）
- 11.1 COOP/COEP 配置手冊
- 11.2 CSP 政策配置
- 11.3 瀏覽器兼容性矩陣
- 11.4 CDN 部署策略
- 11.5 NPM 發布配置

### 第七部分：開發支援
#### 12. 開發指南
- 12.1 開發環境設置
- 12.2 測試策略
- 12.3 調試技巧
- 12.4 構建配置

#### 13. 故障排除
- 13.1 診斷 API
- 13.2 常見問題解答
- 13.3 技術挑戰與解決方案
- 13.4 錯誤處理策略

### 第八部分：參考文檔
#### 14. API 參考
- 14.1 公開 API
- 14.2 配置選項詳解
- 14.3 事件列表
- 14.4 TypeScript 型別定義
- 14.5 參數驗證（VAD 參數等）

#### 15. 附錄
- 15.1 開發路線圖
- 15.2 安全性聲明
- 15.3 授權資訊
- 15.4 更新日誌
- 15.5 參考資源

## 重複內容處理記錄

| 原始位置 | 處理方式 | 新位置 |
|---------|----------|--------|
| 第7節（兩個） | 合併 | 第7章 模型管理系統 |
| 第10節（四個） | 拆分重組 | 第11章（部署）、第13章（故障排除）、附錄（路線圖） |
| 執行模式（多處） | 統一 | 第5.1節 |
| 配置系統（分散） | 集中 | 第10章 |
| Worker（分散） | 統一 | 第8章 |
| 瀏覽器兼容（多處） | 整合 | 第11.3節 |

## 內容長度預估

- 原始文檔：3900 行
- 重構後預估：約 3000 行（移除重複約 900 行）
- 結構更清晰，查找更方便
- 適合作為技術文檔和開發參考